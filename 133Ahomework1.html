<!DOCTYPE html>
<html lang="en">

<head>
    <link href="mystyle.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Changing Theme</title>

    <!-- Site created by Phil Burkart on August 30, 2024 -->
    <style>
        h1 {
            text-align: center;
        }

        footer {
            text-align: center;
            margin-top: 1.2rem;
        }

        button {
            color: black;
            background-color: darkgray;
            width: auto;
            margin: 0 10px;
            height: 30px;
        }

        section {
            font-size: 1.2rem;
        }

        section h2 {
            text-align: center;
            font-size: 1.6rem;
            font-style: italic;
        }

        figure {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
        }

        /* Light theme styles */
        body.light-theme {
            background-color: white;
            color: black;
        }

        /* Dark theme styles */
        body.dark-theme {
            background-color: black;
            color: white;
        }

        .theme-icon {
            display: none;
        }

        body.light-theme .sun-icon {
            display: block;
        }

        body.dark-theme .moon-icon {
            display: block;
        }
    </style>
</head>

<body class="light-theme">
    <header>
        <h1>Changing Themes</h1>
    </header>

    <section>
        <h2>Using jQuery</h2>
        <p>We will create a jQuery code so if the user clicks on the Light Theme button, you will apply the appropriate class to make the whole page lighter. The image below will also be changed to show the image of the sun! If the Dark Theme button is clicked, the image of the moon will be displayed and the appropriate class will be applied to the whole page as well.</p>
        <figure>
            <img src="https://github.com/ionagael/CNIT133/blob/main/images/sun.jpeg?raw=true" alt="cartoon sun" width="300" height="280" class="theme-icon sun-icon">
            <img src="https://github.com/ionagael/CNIT133/blob/main/images/moon.jpeg?raw=true" alt="cartoon moon" width="300" height="280" class="theme-icon moon-icon">
        </figure>
    </section>

    <footer>
        <button id="lightThemeButton">Light Theme</button>
        <button id="darkThemeButton">Dark Theme</button>
    </footer>

    <select name="city" id="city" 
        hx-post="/api/search" 
        hx-trigger="load, change"
        hx-target="#result">
    <option>San Francisco</option>
    <option>New York</option>
    <option>Las Vegas</option>
</select>
    <p>
hx-post="/api/search": specifies that a POST request should be sent to the endpoint /api/search whenever the trigger conditions are met. The value "/api/search" represents the URL or API endpoint where the POST request will be sent. This is where your server-side logic will handle the request and return a response based on the selected city.

hx-trigger="load, change": This attribute tells HTMX to trigger the request on both the load event (when the page is first loaded) and the change event (when the user selects a different option from the dropdown). By listing both triggers, you ensure that the request is made initially when the page loads and anytime the user changes their selection.

hx-target="#result": This attribute specifies that the response from the /api/search POST request should be displayed in the element with the ID result. This is where the result of the search (or any other action your server performs based on the selected city) will be rendered.

What Happens:
On Page Load: When the page initially loads, a POST request is automatically sent to /api/search with the selected city value (if any).
On Selection Change: When the user selects a different city from the dropdown, another POST request is sent to /api/search, and the response is updated in the #result element.
This combination of triggers gives you the desired behavior with HTMX.
        
    </p>
        

    <!-- Include jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#lightThemeButton').click(function () {
                // Apply the light theme by adding the 'light-theme' class to the body
                $('body').removeClass('dark-theme').addClass('light-theme');
            });

            $('#darkThemeButton').click(function () {
                // Apply the dark theme by adding the 'dark-theme' class to the body
                $('body').removeClass('light-theme').addClass('dark-theme');
            });
        });
    </script>

</body>

</html>
